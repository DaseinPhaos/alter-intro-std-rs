<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>std::convert</title>

    <link rel="stylesheet" type="text/css" href="rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ol class='chapter'>
<li><a  href='README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='macros-readme.html'><b>2.</b> Macros in std</a>
</li>
<li><a  href='mods-readme.html'><b>3.</b> Uncategorized Modules</a>
<ol class='section'>
<li><a  href='any-readme.html'><b>3.1.</b> std::any</a>
</li>
<li><a  href='ascii-readme.html'><b>3.2.</b> std::ascii</a>
</li>
<li><a  href='borrow-readme.html'><b>3.3.</b> std::borrow</a>
</li>
<li><a  href='boxed-readme.html'><b>3.4.</b> std::boxed</a>
</li>
<li><a  href='cell-readme.html'><b>3.5.</b> std::cell</a>
</li>
<li><a  href='clone-readme.html'><b>3.6.</b> std::clone</a>
</li>
<li><a  href='cmp-readme.html'><b>3.7.</b> std::cmp</a>
</li>
<li><a  href='collections-readme.html'><b>3.8.</b> std::collections</a>
</li>
<li><a class='active' href='convert-readme.html'><b>3.9.</b> std::convert</a>
</li>
<li><a  href='default-readme.html'><b>3.10.</b> std::default</a>
</li>
<li><a  href='env-readme.html'><b>3.11.</b> std::env</a>
</li>
<li><a  href='error-readme.html'><b>3.12.</b> std::error</a>
</li>
<li><a  href='ffi-readme.html'><b>3.13.</b> std::ffi</a>
</li>
<li><a  href='fmt-readme.html'><b>3.14.</b> std::fmt</a>
</li>
<li><a  href='fs-readme.html'><b>3.15.</b> std::fs</a>
</li>
<li><a  href='hash-readme.html'><b>3.16.</b> std::hash</a>
</li>
<li><a  href='io-readme.html'><b>3.17.</b> std::io</a>
</li>
<li><a  href='iter-readme.html'><b>3.18.</b> std::iter</a>
</li>
</ol>
</li>
</ol>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">std::convert</h1>
    <blockquote>
<p><a href="https://doc.rust-lang.org/std/convert/">https://doc.rust-lang.org/std/convert/</a></p>
</blockquote>

<p>This module defines traits that provide a general way to talk about type conversions.</p>

<ul>
<li><code>As</code>* traits are for conversions between references.</li>
<li><code>Into</code> trait is for by-value conversions.</li>
<li><code>From</code> trait is the most flexible one, useful for both value and ref conversions.</li>
<li>The currently <a href="https://github.com/rust-lang/rust/issues/33417">unstable</a> <code>Try*</code> traits behave like their non-prefixed siblings, but allow for the conversion fail.</li>
</ul>

<h1 id='as' class='section-header'><a href='#as'>As*</a></h1>
<p>These traits are for ref-to-ref conversions.</p>

<p>First there is <code>AsRef</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>trait</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span><span class='op'>&gt;</span> {
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>T</span>;
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20trait%20AsRef%3CT%3A%20%3FSized%3E%20%7B%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26T%3B%0A%7D%0A%7D">Run</a></pre>

<p>This is intended to be a cheap ref-to-ref conversion that <strong>must not fail</strong>.</p>

<p>Note that, its generic implementations includes:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='lifetime'>&#39;a</span>, <span class='ident'>T</span>, <span class='ident'>U</span><span class='op'>&gt;</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;a</span> <span class='ident'>T</span>
    <span class='kw'>where</span> <span class='ident'>T</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='op'>+</span> <span class='question-mark'>?</span><span class='ident'>Sized</span>,
          <span class='ident'>U</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span> {
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>U</span> {
        <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;&gt;</span>::<span class='ident'>as_ref</span>(<span class='kw-2'>*</span><span class='self'>self</span>)
    }
}

<span class='kw'>impl</span><span class='op'>&lt;</span><span class='lifetime'>&#39;a</span>, <span class='ident'>T</span>, <span class='ident'>U</span><span class='op'>&gt;</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;a</span> <span class='kw-2'>mut</span> <span class='ident'>T</span>
    <span class='kw'>where</span> <span class='ident'>T</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='op'>+</span> <span class='op'>&gt;</span><span class='ident'>Sized</span>,
          <span class='ident'>U</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span> {
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>U</span> {
        <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;&gt;</span>::<span class='ident'>as_ref</span>(<span class='kw-2'>*</span><span class='self'>self</span>)
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3C'a%2C%20T%2C%20U%3E%20AsRef%3CU%3E%20for%20%26'a%20T%0A%20%20%20%20where%20T%3A%20AsRef%3CU%3E%20%2B%20%3FSized%2C%0A%20%20%20%20%20%20%20%20%20%20U%3A%20%3FSized%20%7B%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26U%20%7B%0A%20%20%20%20%20%20%20%20%3CT%20as%20AsRef%3CU%3E%3E%3A%3Aas_ref(*self)%0A%20%20%20%20%7D%0A%7D%0A%0Aimpl%3C'a%2C%20T%2C%20U%3E%20AsRef%3CU%3E%20for%20%26'a%20mut%20T%0A%20%20%20%20where%20T%3A%20AsRef%3CU%3E%20%2B%20%3ESized%2C%0A%20%20%20%20%20%20%20%20%20%20U%3A%20%3FSized%20%7B%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26U%20%7B%0A%20%20%20%20%20%20%20%20%3CT%20as%20AsRef%3CU%3E%3E%3A%3Aas_ref(*self)%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>This means that, <code>AsRef</code> would auto-dereference its inner type. For example, if <code>Foo: AsRef&lt;Bar&gt;</code>, then <code>foo.as_ref()</code> will work the same if <code>foo: &amp; Foo</code> or <code>foo: &amp;&amp;mut Foo</code> etc.</p>

<p>With the knowledge above, also note the concrete implementations included:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span>[<span class='ident'>T</span>]<span class='op'>&gt;</span> <span class='kw'>for</span> [<span class='ident'>T</span>] {
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span>[<span class='ident'>T</span>] {
        <span class='self'>self</span>
    }
}

<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>str</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>str</span> {
    <span class='attribute'>#[<span class='ident'>inline</span>]</span>
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>str</span> {
        <span class='self'>self</span>
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20AsRef%3C%5BT%5D%3E%20for%20%5BT%5D%20%7B%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26%5BT%5D%20%7B%0A%20%20%20%20%20%20%20%20self%0A%20%20%20%20%7D%0A%7D%0A%0Aimpl%3CT%3E%20AsRef%3Cstr%3E%20for%20str%20%7B%0A%20%20%20%20%23%5Binline%5D%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26str%20%7B%0A%20%20%20%20%20%20%20%20self%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>This in effect guarantees that for any <code>foo: &amp;[T]</code> (or <code>foo: &amp;&amp;mut [T}</code>), <code>foo.as_ref()</code> would produce an <code>&amp;[T]</code> as we&#39;d expect. The same goes for <code>str</code>.</p>

<p>Some other examples of its implementation include:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span><span class='op'>&gt;</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>Box</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>T</span> {
        <span class='kw-2'>&amp;</span><span class='kw-2'>*</span><span class='kw-2'>*</span><span class='self'>self</span>
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3A%20%3FSized%3E%20AsRef%3CT%3E%20for%20Box%3CT%3E%20%7B%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26T%20%7B%0A%20%20%20%20%20%20%20%20%26**self%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>str</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>String</span> {
    <span class='attribute'>#[<span class='ident'>inline</span>]</span>
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='ident'>str</span> {
        <span class='self'>self</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>AsRef</span><span class='op'>&lt;</span>[<span class='ident'>u8</span>]<span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>String</span> {
    <span class='attribute'>#[<span class='ident'>inline</span>]</span>
    <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span>[<span class='ident'>u8</span>] {
        <span class='self'>self</span>.<span class='ident'>as_bytes</span>()
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20AsRef%3Cstr%3E%20for%20String%20%7B%0A%20%20%20%20%23%5Binline%5D%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26str%20%7B%0A%20%20%20%20%20%20%20%20self%0A%20%20%20%20%7D%0A%7D%0A%0Aimpl%20AsRef%3C%5Bu8%5D%3E%20for%20String%20%7B%0A%20%20%20%20%23%5Binline%5D%0A%20%20%20%20fn%20as_ref(%26self)%20-%3E%20%26%5Bu8%5D%20%7B%0A%20%20%20%20%20%20%20%20self.as_bytes()%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Next there is <code>AsMut</code>, for cheap <code>&amp; mut</code>-to-<code>&amp; mut</code> conversion, which also must not fail:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>trait</span> <span class='ident'>AsMut</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span><span class='op'>&gt;</span> {
    <span class='kw'>fn</span> <span class='ident'>as_mut</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>T</span>;
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20trait%20AsMut%3CT%3A%20%3FSized%3E%20%7B%0A%20%20%20%20fn%20as_mut(%26mut%20self)%20-%3E%20%26mut%20T%3B%0A%7D%0A%7D">Run</a></pre>

<p>Similar to <code>AsRef</code>, it also performs auto dereferencing:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='lifetime'>&#39;a</span>, <span class='ident'>T</span>, <span class='ident'>U</span><span class='op'>&gt;</span> <span class='ident'>AsMut</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='lifetime'>&#39;a</span> <span class='ident'>T</span>
<span class='kw'>where</span> <span class='ident'>T</span>: <span class='ident'>AsMut</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='op'>+</span> <span class='question-mark'>?</span><span class='ident'>Sized</span>,
      <span class='ident'>U</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span> {
    <span class='kw'>fn</span> <span class='ident'>as_mut</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>U</span> {
        (<span class='kw-2'>*</span><span class='self'>self</span>).<span class='ident'>as_mut</span>()
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3C'a%2C%20T%2C%20U%3E%20AsMut%3CU%3E%20for%20'a%20T%0Awhere%20T%3A%20AsMut%3CU%3E%20%2B%20%3FSized%2C%0A%20%20%20%20%20%20U%3A%20%3FSized%20%7B%0A%20%20%20%20fn%20as_mut(%26mut%20self)%20-%3E%20%26mut%20U%20%7B%0A%20%20%20%20%20%20%20%20(*self).as_mut()%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>and also is implemented for <code>[T]</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='question-mark'>?</span><span class='ident'>Sized</span><span class='op'>&gt;</span> <span class='ident'>AsMut</span><span class='op'>&lt;</span>[<span class='ident'>T</span>]<span class='op'>&gt;</span> <span class='kw'>for</span> [<span class='ident'>T</span>] {
    <span class='kw'>fn</span> <span class='ident'>as_mut</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> [<span class='ident'>T</span>] {
        <span class='self'>self</span>
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3A%20%3FSized%3E%20AsMut%3C%5BT%5D%3E%20for%20%5BT%5D%20%7B%0A%20%20%20%20fn%20as_mut(%26mut%20self)%20-%3E%20%26mut%20%5BT%5D%20%7B%0A%20%20%20%20%20%20%20%20self%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<h1 id='from-and-into' class='section-header'><a href='#from-and-into'>From and Into</a></h1>
<p>Then there are traits for by-value conversions:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>trait</span> <span class='ident'>From</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span>: <span class='ident'>Sized</span> {
    <span class='kw'>fn</span> <span class='ident'>from</span>(<span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='self'>Self</span>;
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20trait%20From%3CT%3E%3A%20Sized%20%7B%0A%20%20%20%20fn%20from(T)%20-%3E%20Self%3B%0A%7D%0A%7D">Run</a></pre>

<p>The <code>From&lt;T&gt;</code> trait constructs a <code>Self</code> from <code>T</code>.</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>trait</span> <span class='ident'>Into</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span>: <span class='ident'>Sized</span> {
    <span class='kw'>fn</span> <span class='ident'>into</span>(<span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span>;
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20trait%20Into%3CT%3E%3A%20Sized%20%7B%0A%20%20%20%20fn%20into(self)%20-%3E%20T%3B%0A%7D%0A%7D">Run</a></pre>

<p>The <code>Into&lt;T&gt;</code> trait constructs a <code>T</code> from a <code>self: Self</code>.</p>

<p>Note that the module also defines the following generic implementations:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span>, <span class='ident'>U</span><span class='op'>&gt;</span> <span class='ident'>Into</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>T</span>
    <span class='kw'>where</span> <span class='ident'>U</span>: <span class='ident'>From</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>fn</span> <span class='ident'>into</span>(<span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span> {
        <span class='ident'>U</span>::<span class='ident'>from</span>(<span class='self'>self</span>)
    }
}

<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='ident'>From</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>T</span> {
    <span class='kw'>fn</span> <span class='ident'>from</span>(<span class='ident'>t</span>: <span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> { <span class='ident'>t</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%2C%20U%3E%20Into%3CU%3E%20for%20T%0A%20%20%20%20where%20U%3A%20From%3CT%3E%20%7B%0A%20%20%20%20fn%20into(self)%20-%3E%20U%20%7B%0A%20%20%20%20%20%20%20%20U%3A%3Afrom(self)%0A%20%20%20%20%7D%0A%7D%0A%0Aimpl%3CT%3E%20From%3CT%3E%20for%20T%20%7B%0A%20%20%20%20fn%20from(t%3A%20T)%20-%3E%20T%20%7B%20t%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>That is:
* <code>T: From&lt;U&gt;</code> implies <code>U: Into&lt;T&gt;</code>,
* <code>From</code> is reflexive on <code>T</code>, thus <code>Into</code> is also reflexive.</p>

<p>As such, the general advice is that, library authors should not directly implement any <code>U: Into&lt;T&gt;</code>, but implement <code>T: From&lt;U&gt;</code> instead, as the later offers greater flexibility, and provides the equivalent <code>Into</code> implementation anyway.</p>

<p>These two traits are used broadly within the standard library.</p>

    <script src='rustbook.js'></script>
</div></div>


</body>
</html>