<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>std::fs</title>

    <link rel="stylesheet" type="text/css" href="rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ol class='chapter'>
<li><a  href='README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='macros-readme.html'><b>2.</b> Macros in std</a>
</li>
<li><a  href='mods-readme.html'><b>3.</b> Uncategorized Modules</a>
<ol class='section'>
<li><a  href='any-readme.html'><b>3.1.</b> std::any</a>
</li>
<li><a  href='ascii-readme.html'><b>3.2.</b> std::ascii</a>
</li>
<li><a  href='borrow-readme.html'><b>3.3.</b> std::borrow</a>
</li>
<li><a  href='boxed-readme.html'><b>3.4.</b> std::boxed</a>
</li>
<li><a  href='cell-readme.html'><b>3.5.</b> std::cell</a>
</li>
<li><a  href='clone-readme.html'><b>3.6.</b> std::clone</a>
</li>
<li><a  href='cmp-readme.html'><b>3.7.</b> std::cmp</a>
</li>
<li><a  href='collections-readme.html'><b>3.8.</b> std::collections</a>
</li>
<li><a  href='convert-readme.html'><b>3.9.</b> std::convert</a>
</li>
<li><a  href='default-readme.html'><b>3.10.</b> std::default</a>
</li>
<li><a  href='env-readme.html'><b>3.11.</b> std::env</a>
</li>
<li><a  href='error-readme.html'><b>3.12.</b> std::error</a>
</li>
<li><a  href='ffi-readme.html'><b>3.13.</b> std::ffi</a>
</li>
<li><a  href='fmt-readme.html'><b>3.14.</b> std::fmt</a>
</li>
<li><a class='active' href='fs-readme.html'><b>3.15.</b> std::fs</a>
</li>
<li><a  href='hash-readme.html'><b>3.16.</b> std::hash</a>
</li>
<li><a  href='io-readme.html'><b>3.17.</b> std::io</a>
</li>
<li><a  href='iter-readme.html'><b>3.18.</b> std::iter</a>
</li>
<li><a  href='marker-readme.html'><b>3.19.</b> std::marker</a>
</li>
</ol>
</li>
</ol>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">std::fs</h1>
    <blockquote>
<p><a href="https://doc.rust-lang.org/std/fs/">https://doc.rust-lang.org/std/fs/</a></p>
</blockquote>

<p>The module contains some functions and structures to manipulate the local filesystems. Extra platform-specific functionalities can be found in the extension modules <code>std::os::$platform_name</code>.</p>

<h1 id='functions' class='section-header'><a href='#functions'>Functions</a></h1>
<h2 id='for-directory' class='section-header'><a href='#for-directory'>For Directory</a></h2>
<p>First of all, to create a directory:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_dir</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20create_dir%3CP%3E(path%3A%20P)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>As its name suggests, the function creates a new empty directory at the provided <code>AsRef&lt;std::path::Path&gt;</code>. When user lacks permissions or <code>path</code> already exists, the function would return an <code>Err</code> indicating creation failure.</p>

<p>The module also contains</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_dir_all</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20create_dir_all%3CP%3E(path%3A%20P)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>which would recursively create a directory and all its parent components if they don&#39;t already exist.</p>

<p>Then, to remove a directory:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>remove_dir</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20remove_dir%3CP%3E(path%3A%20P)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>This function would fail if the user lacks permissions or the provided directory isn&#39;t empty. While the following</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>remove_dir_all</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20remove_dir_all%3CP%3E(path%3A%20P)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>would remove the directory and <em>all</em> its contents.</p>

<p>Next, to get content-infos of a directory:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>read_dir</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>ReadDir</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20read_dir%3CP%3E(path%3A%20P)%20-%3E%20Result%3CReadDir%3E%0A%7D">Run</a></pre>

<p>The function returns an iterator(<code>ReadDir</code>) over the entries within the given directory. When the provided directory doesn&#39;t exist, or the user lacks permissions, the invocation would fail.</p>

<p>The returned <code>ReadDir</code> implements <code>Iterator&lt;Item=Result&lt;DirEntry&gt;</code>, where a <code>DirEntry</code> returns an entry(either a file, a link, or another directory). It implements the following methods:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>DirEntry</span> {
    <span class='comment'>// returns the full path to the entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>path</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>PathBuf</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the metadata of the entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>metaData</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>Metadata</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the type of the entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>file_type</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>FileType</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the file name of the entry without other leading path components</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>file_name</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>OsString</span> { <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20DirEntry%20%7B%0A%20%20%20%20%2F%2F%20returns%20the%20full%20path%20to%20the%20entry%0A%20%20%20%20pub%20fn%20path(%26self)%20-%3E%20PathBuf%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20metadata%20of%20the%20entry%0A%20%20%20%20pub%20fn%20metaData(%26self)%20-%3E%20Result%3CMetadata%3E%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20type%20of%20the%20entry%0A%20%20%20%20pub%20fn%20file_type(%26self)%20-%3E%20Result%3CFileType%3E%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20file%20name%20of%20the%20entry%20without%20other%20leading%20path%20components%0A%20%20%20%20pub%20fn%20file_name(%26self)%20-%3E%20OsString%20%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Note the <code>metadata</code> method. Upon success it returns a <code>Metadata</code>, which is a struct containing meta-information about the entry.</p>

<p>Also note the <code>file_type</code> method, which returns a <code>FileType</code> upon success.</p>

<p>We will come to these structures later. For now let&#39;s focus on other functions defined in the module.</p>

<h2 id='for-file' class='section-header'><a href='#for-file'>For File</a></h2>
<p>Now to copy a file:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>copy</span><span class='op'>&lt;</span><span class='ident'>P</span>, <span class='ident'>Q</span><span class='op'>&gt;</span>(<span class='ident'>from</span>: <span class='ident'>P</span>, <span class='ident'>to</span>: <span class='ident'>Q</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>u64</span><span class='op'>&gt;</span>
    <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span>, <span class='ident'>Q</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20copy%3CP%2C%20Q%3E(from%3A%20P%2C%20to%3A%20Q)%20-%3E%20Result%3Cu64%3E%0A%20%20%20%20where%20P%3A%20AsRef%3CPath%3E%2C%20Q%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>The function copies contents of <code>from</code> to <code>to</code>. It will <em>overwrite</em> the contents of <code>to</code>. On success, the number of bytes copied is returned. When <code>from</code> is not a file or doesn&#39;t exist, or the user lacks permissions, this invocation would fail.</p>

<p>Next, to remove a file:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>remove_file</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20remove_file%3CP%3E(path%3A%20P)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>The function tries to remove a file from the file system. However, depending on the platform, there is no guarantee that the file is immediately deleted. The function will return an error if <code>path</code> is not a valid file or the user lacks permissions.</p>

<h2 id='for-link' class='section-header'><a href='#for-link'>For Link</a></h2>
<p>Next, to create a new hard link:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>hard_link</span><span class='op'>&lt;</span><span class='ident'>P</span>, <span class='ident'>Q</span><span class='op'>&gt;</span>(<span class='ident'>src</span>: <span class='ident'>P</span>, <span class='ident'>dst</span>: <span class='ident'>Q</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>
    <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span>, <span class='ident'>Q</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20hard_link%3CP%2C%20Q%3E(src%3A%20P%2C%20dst%3A%20Q)%20-%3E%20Result%3C()%3E%0A%20%20%20%20where%20P%3A%20AsRef%3CPath%3E%2C%20Q%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>Upon success, the <code>dst</code> will be a link pointing to <code>src</code>. The function will return an <code>Err</code> is <code>src</code> is not a file or deosn&#39;t exist.</p>

<p>To read a link and returns the entry that the link points to:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>read_link</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>PathBuf</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20read_link%3CP%3E(path%3A%20P)%20-%3E%20Result%3CPathBuf%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<h2 id='common-manipulations' class='section-header'><a href='#common-manipulations'>Common Manipulations</a></h2>
<p>Next, to rename a file or a directory:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>rename</span><span class='op'>&lt;</span><span class='ident'>P</span>, <span class='ident'>Q</span><span class='op'>&gt;</span>(<span class='ident'>from</span>: <span class='ident'>P</span>, <span class='ident'>to</span>: <span class='ident'>Q</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>
    <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span>, <span class='ident'>Q</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20rename%3CP%2C%20Q%3E(from%3A%20P%2C%20to%3A%20Q)%20-%3E%20Result%3C()%3E%0A%20%20%20%20where%20P%3A%20AsRef%3CPath%3E%2C%20Q%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>This function will return an <code>Err</code> if <code>from</code> doesn&#39;t exist or the user lacks permissions or <code>from</code> and <code>to</code> are on separate filesystems.</p>

<p>To query metadata about the entry:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>metadata</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>Metadata</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20metadata%3CP%3E(path%3A%20P)%20-%3E%20Result%3CMetadata%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>The function will traverse symbolic links to query information about the entry. However, the next function won&#39;t:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>symlink_metadata</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>Metadata</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20symlink_metadata%3CP%3E(path%3A%20P)%20-%3E%20Result%3CMetadata%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>Next, to set permissions on the entry:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_permissions</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>, <span class='ident'>perm</span>: <span class='ident'>Permissions</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20set_permissions%3CP%3E(path%3A%20P%2C%20perm%3A%20Permissions)%20-%3E%20Result%3C()%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<p>This function would faile if <code>path</code> doesn&#39;t exist or the user lacks permissions to change the file.</p>

<p>Lastly, there is a function to canonicalize a path, the reuturned path will have all its intermediate components normlized, and symbolic links resolved:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>canonicalize</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>PathBuf</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20fn%20canonicalize%3CP%3E(path%3A%20P)%20-%3E%20Result%3CPathBuf%3E%20where%20P%3A%20AsRef%3CPath%3E%0A%7D">Run</a></pre>

<h2 id='metadata' class='section-header'><a href='#metadata'>Metadata</a></h2>
<p>Now let&#39;s take a look at <code>Metadata</code>. It implements:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>Metadata</span> {
    <span class='comment'>// returns the type of the represented entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>file_type</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>FileType</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns whether the represented entry is a directory</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_dir</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns whether the represented entry is a file</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_file</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the size of the represented entry in bytes</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>lent</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>u64</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the permissions of the represented entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>permissions</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>Permissions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the last modification time of the represented entry</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>modified</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>SystemTime</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the last access time</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>accessed</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>SystemTime</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// returns the creation time</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>created</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>SystemTime</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20Metadata%20%7B%0A%20%20%20%20%2F%2F%20returns%20the%20type%20of%20the%20represented%20entry%0A%20%20%20%20pub%20fn%20file_type(%26self)%20-%3E%20FileType%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20whether%20the%20represented%20entry%20is%20a%20directory%0A%20%20%20%20pub%20fn%20is_dir(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20whether%20the%20represented%20entry%20is%20a%20file%0A%20%20%20%20pub%20fn%20is_file(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20size%20of%20the%20represented%20entry%20in%20bytes%0A%20%20%20%20pub%20fn%20lent(%26self)%20-%3E%20u64%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20permissions%20of%20the%20represented%20entry%0A%20%20%20%20pub%20fn%20permissions(%26self)%20-%3E%20Permissions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20last%20modification%20time%20of%20the%20represented%20entry%0A%20%20%20%20pub%20fn%20modified(%26self)%20-%3E%20Result%3CSystemTime%3E%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20last%20access%20time%0A%20%20%20%20pub%20fn%20accessed(%26self)%20-%3E%20Result%3CSystemTime%3E%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20returns%20the%20creation%20time%0A%20%20%20%20pub%20fn%20created(%26self)%20-%3E%20Result%3CSystemTime%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>It also implements <code>Clone</code>.</p>

<h2 id='filetype' class='section-header'><a href='#filetype'>FileType</a></h2>
<p>The structure represents types of a filesystem entry. It implements:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>FileType</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_dir</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_file</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_symlink</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20FileType%20%7B%0A%20%20%20%20pub%20fn%20is_dir(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20pub%20fn%20is_file(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20pub%20fn%20is_symlink(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>It also implements <code>Copy</code>, <code>Clone</code>, <code>PartialEq</code>, <code>Eq</code>, <code>Hash</code> and <code>Debug</code>.</p>

<h2 id='permissions' class='section-header'><a href='#permissions'>Permissions</a></h2>
<p>The structure represents various permissions on a filesystem entry. Currently, it only provides one bit of info, <code>readonly</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>Permissions</span> {
    <span class='comment'>// returns whether the permission describes a readonly entry.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>readonly</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// set the readonly flag for the permission.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_readonly</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>selt</span>, <span class='ident'>readonly</span>: <span class='ident'>bool</span>){ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20Permissions%20%7B%0A%20%20%20%20%2F%2F%20returns%20whether%20the%20permission%20describes%20a%20readonly%20entry.%0A%20%20%20%20pub%20fn%20readonly(%26self)%20-%3E%20bool%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20set%20the%20readonly%20flag%20for%20the%20permission.%0A%20%20%20%20pub%20fn%20set_readonly(%26mut%20selt%2C%20readonly%3A%20bool)%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>It also implements <code>Clone</code>, <code>PartialEq</code>, <code>Eq</code> and <code>Debug</code>.</p>

<h1 id='builders' class='section-header'><a href='#builders'>Builders</a></h1>
<p>Addtionally, the module also exposes two builder-structs for a more object-oriented style directory creation and file opening.</p>

<h2 id='dirbuilder' class='section-header'><a href='#dirbuilder'>DirBuilder</a></h2>
<p>The struct is a builder for directory creation. For me it has little usage, check the official doc.</p>

<h2 id='openoptions' class='section-header'><a href='#openoptions'>OpenOptions</a></h2>
<p>The struct is a builder for file opening. It contains options to configure how a file should opend.</p>

<p>Firstly, to create a new set of options:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>OpenOptions</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>new</span>() <span class='op'>-&gt;</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20OpenOptions%20%7B%0A%20%20%20%20pub%20fn%20new()%20-%3E%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>All options are initially set to <code>false</code>.</p>

<p>Next, to set various options:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>OpenOptions</span> {
    <span class='comment'>// Sets read access. When true, the file should be readable when opened.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>read</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>read</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// Sets write access. When true, the file should be writable when opened.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>write</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>write</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// Sets append acess. When true, writing will append to the file, rather</span>
    <span class='comment'>// than overwrting from the file&#39;s start. When set, it also implicitly</span>
    <span class='comment'>// sets the `write` flag.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>append</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>append</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// Sets the truncating option. When true, the file would be truncated to</span>
    <span class='comment'>// zero-length if it already exists. Write access should also be set for</span>
    <span class='comment'>// the truncation to work.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>truncate</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>truncate</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// Sets the creation option. When true, a new file will be created if the</span>
    <span class='comment'>// file doesn&#39;t exist when opened. In order for this to work, `write`</span>
    <span class='comment'>// access should be set.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>create</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }

    <span class='comment'>// Sets the creation option. When true, a new file will *always* be created</span>
    <span class='comment'>// upon opening. In order for this to work, `write` access should be set.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_new</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>create_new</span>: <span class='ident'>bool</span>) <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>OpenOptions</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20OpenOptions%20%7B%0A%20%20%20%20%2F%2F%20Sets%20read%20access.%20When%20true%2C%20the%20file%20should%20be%20readable%20when%20opened.%0A%20%20%20%20pub%20fn%20read(%26mut%20self%2C%20read%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20Sets%20write%20access.%20When%20true%2C%20the%20file%20should%20be%20writable%20when%20opened.%0A%20%20%20%20pub%20fn%20write(%26mut%20self%2C%20write%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20Sets%20append%20acess.%20When%20true%2C%20writing%20will%20append%20to%20the%20file%2C%20rather%0A%20%20%20%20%2F%2F%20than%20overwrting%20from%20the%20file's%20start.%20When%20set%2C%20it%20also%20implicitly%0A%20%20%20%20%2F%2F%20sets%20the%20%60write%60%20flag.%0A%20%20%20%20pub%20fn%20append(%26mut%20self%2C%20append%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20Sets%20the%20truncating%20option.%20When%20true%2C%20the%20file%20would%20be%20truncated%20to%0A%20%20%20%20%2F%2F%20zero-length%20if%20it%20already%20exists.%20Write%20access%20should%20also%20be%20set%20for%0A%20%20%20%20%2F%2F%20the%20truncation%20to%20work.%0A%20%20%20%20pub%20fn%20truncate(%26mut%20self%2C%20truncate%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20Sets%20the%20creation%20option.%20When%20true%2C%20a%20new%20file%20will%20be%20created%20if%20the%0A%20%20%20%20%2F%2F%20file%20doesn't%20exist%20when%20opened.%20In%20order%20for%20this%20to%20work%2C%20%60write%60%0A%20%20%20%20%2F%2F%20access%20should%20be%20set.%0A%20%20%20%20pub%20fn%20create(%26mut%20self%2C%20create%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20Sets%20the%20creation%20option.%20When%20true%2C%20a%20new%20file%20will%20*always*%20be%20created%0A%20%20%20%20%2F%2F%20upon%20opening.%20In%20order%20for%20this%20to%20work%2C%20%60write%60%20access%20should%20be%20set.%0A%20%20%20%20pub%20fn%20create_new(%26mut%20self%2C%20create_new%3A%20bool)%20-%3E%20%26mut%20OpenOptions%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Lastly, to open a file with current set of options:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>fn</span> <span class='ident'>open</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>File</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Afn%20open%3CP%3E(%26self%2C%20path%3A%20P)%20-%3E%20Result%3CFile%3E%7B%20%2F*...*%2F%20%7D%0A%7D">Run</a></pre>

<p>The function will return the opened <code>File</code> upon success.</p>

<p>The builder also implements <code>Clone</code>.</p>

<h3 id='file' class='section-header'><a href='#file'>File</a></h3>
<p>This is the struct returned by an <code>OpenOption</code>&#39;s <code>open</code> method. It represents a reference to an opened file on the filesystem.</p>

<p>Sometimes it can be a bit verbose to always create a <code>OpenOption</code> for some simple file opening operations. As such, <code>File</code> provides two associated functions:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>open</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>File</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create</span><span class='op'>&lt;</span><span class='ident'>P</span><span class='op'>&gt;</span>(<span class='ident'>path</span>: <span class='ident'>P</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>File</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>P</span>: <span class='ident'>AsRef</span><span class='op'>&lt;</span><span class='ident'>Path</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20open%3CP%3E(path%3A%20P)%20-%3E%20Result%3CFile%3E%20where%20P%3A%20AsRef%3CPath%3E%7B%20%2F*...*%2F%20%7D%0A%0A%20%20%20%20pub%20fn%20create%3CP%3E(path%3A%20P)%20-%3E%20Result%3CFile%3E%20where%20P%3A%20AsRef%3CPath%3E%7B%20%2F*...*%2F%20%7D%0A%7D">Run</a></pre>

<p><code>File::open(p)</code> would try to open a file as in <code>OpenOptions::new().read(true).open(p)</code>.</p>

<p><code>File::create(p)</code> would try to open a file as in <code>OpenOptions::new().write(true).create_new(true).open(p)</code>.</p>

<p>For metadata query we have:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>metadata</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>Metadata</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20metadata(%26self)%20-%3E%20Result%3CMetadata%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>For file length Manipulation we have</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_len</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>size</span>: <span class='ident'>u64</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20set_len(%26self%2C%20size%3A%20u64)%20-%3E%20Result%3C()%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>which would try to truncate or extends the underlying file to <code>size</code> bytes. All intermediate data filled would be set to <code>0</code>.</p>

<p>To acquire another independent reference(i.e. handle) to the underlying file:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>try_clone</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>File</span><span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20try_clone(%26self)%20-%3E%20Result%3CFile%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>The returned handle would be an independent handle, with all the states identicle to the current one.</p>

<p>The underlying file resides on a disk or some other external devices. As such, synchronization should be done between the handle and the underlying file on the disk. For this we have:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>sync_all</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20sync_all(%26self)%20-%3E%20Result%3C()%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>to sync all OS-internal metadata to the disk before its returning.</p>

<p>We also have</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>sync_data</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20sync_data(%26self)%20-%3E%20Result%3C()%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>to just synchronize file data to the filesystem. The method can be ued when content-synchronization is required, but metadata on disk is not. This requires less disk operations(which is <em>really</em> slow) than the previous method.</p>

<p>To set permissions on the file we have:<sup id="fnref1"><a href="#fn1" rel="footnote">1</a></sup></p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span> <span class='ident'>File</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_permissions</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>perm</span>: <span class='ident'>Permissions</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>()<span class='op'>&gt;</span>{ <span class='comment'>/*...*/</span> }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%20File%20%7B%0A%20%20%20%20pub%20fn%20set_permissions(%26self%2C%20perm%3A%20Permissions)%20-%3E%20Result%3C()%3E%7B%20%2F*...*%2F%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>which will try to change the permissions set on the file atomically.</p>

<p>To actually read or write to the file, <code>std::io::Read</code> and <code>std::io::Write</code> as well as <code>std::io::Seek</code> is implemented.</p>

<p><em>Note</em>: The above three traits, <code>Read</code>, <code>Write</code> and <code>Seek</code> are also implemented for <code>&amp;&#39;a File</code>. Why bother? Because <code>Read</code>ing or <code>Writing</code> or <code>Seek</code>ing all requires a mutable reference (as they logically should). However, libstd decides that the mutability of a <code>File</code>, which is simply just a wrapper for some os handle, is irrelavant to the mutability of its pointed file&#39;s content. The handle&#39;s immutability only means that its pointing behavior won&#39;t change, nothing more. As reading/writing/seeking here deals with the pointed file&#39;s content rather than the file handle itself, it should also be usable through an immutable reference of the handle. As such, we have things like <code>impl&lt;&#39;a&gt; Read for &amp;&#39;a File</code>. This pattern is fairly common in the standard library.</p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>As of 1.15 the function is marked as unstable. However, according to the associated tracking issue, it would be stablized with the release of 1.16.&nbsp;<a href="#fnref1" rev="footnote">&#8617;</a></p>
</li>

</ol>
</div>

    <script src='rustbook.js'></script>
</div></div>


</body>
</html>