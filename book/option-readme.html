<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>std::option</title>

    <link rel="stylesheet" type="text/css" href="rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ol class='chapter'>
<li><a  href='README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='macros-readme.html'><b>2.</b> Macros in std</a>
</li>
<li><a  href='mods-readme.html'><b>3.</b> Uncategorized Modules</a>
<ol class='section'>
<li><a  href='any-readme.html'><b>3.1.</b> std::any</a>
</li>
<li><a  href='ascii-readme.html'><b>3.2.</b> std::ascii</a>
</li>
<li><a  href='borrow-readme.html'><b>3.3.</b> std::borrow</a>
</li>
<li><a  href='boxed-readme.html'><b>3.4.</b> std::boxed</a>
</li>
<li><a  href='cell-readme.html'><b>3.5.</b> std::cell</a>
</li>
<li><a  href='clone-readme.html'><b>3.6.</b> std::clone</a>
</li>
<li><a  href='cmp-readme.html'><b>3.7.</b> std::cmp</a>
</li>
<li><a  href='collections-readme.html'><b>3.8.</b> std::collections</a>
</li>
<li><a  href='convert-readme.html'><b>3.9.</b> std::convert</a>
</li>
<li><a  href='default-readme.html'><b>3.10.</b> std::default</a>
</li>
<li><a  href='env-readme.html'><b>3.11.</b> std::env</a>
</li>
<li><a  href='error-readme.html'><b>3.12.</b> std::error</a>
</li>
<li><a  href='ffi-readme.html'><b>3.13.</b> std::ffi</a>
</li>
<li><a  href='fmt-readme.html'><b>3.14.</b> std::fmt</a>
</li>
<li><a  href='fs-readme.html'><b>3.15.</b> std::fs</a>
</li>
<li><a  href='hash-readme.html'><b>3.16.</b> std::hash</a>
</li>
<li><a  href='io-readme.html'><b>3.17.</b> std::io</a>
</li>
<li><a  href='iter-readme.html'><b>3.18.</b> std::iter</a>
</li>
<li><a  href='marker-readme.html'><b>3.19.</b> std::marker</a>
</li>
<li><a  href='mem-readme.html'><b>3.20.</b> std::mem</a>
</li>
<li><a  href='net-readme.html'><b>3.21.</b> std::net</a>
</li>
<li><a  href='num-readme.html'><b>3.22.</b> std::num</a>
</li>
<li><a  href='ops-readme.html'><b>3.23.</b> std::ops</a>
</li>
<li><a class='active' href='option-readme.html'><b>3.24.</b> std::option</a>
</li>
<li><a  href='os-readme.html'><b>3.25.</b> std::os</a>
</li>
<li><a  href='panic-readme.html'><b>3.26.</b> std::panic</a>
</li>
<li><a  href='path-readme.html'><b>3.27.</b> std::path</a>
</li>
<li><a  href='prelude-readme.html'><b>3.28.</b> std::prelude</a>
</li>
<li><a  href='process-readme.html'><b>3.29.</b> std::process</a>
</li>
</ol>
</li>
</ol>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">std::option</h1>
    <p>This module contains definition for <code>Option</code> and some relevant structs.</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='prelude-val'>None</span>,
    <span class='prelude-val'>Some</span>(<span class='ident'>T</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Apub%20enum%20Option%3CT%3E%20%7B%0A%20%20%20%20None%2C%0A%20%20%20%20Some(T)%2C%0A%7D%0A%7D">Run</a></pre>

<p>An <code>Option&lt;T&gt;</code> represents a value that can optionally hold a value of type <code>T</code>. Being an <code>enum</code>, whether it actually holds a value (<code>Some(T)</code>) or not (<code>None</code>) is always determined. It was <em>very</em> very commonly used in the Rust world.</p>

<p>It is commonly paired with pattern matching. As such, some utility methods are defined.</p>

<hr>

<p>To determine whether the underlying value is <code>Some</code> or <code>None</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_some</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span> {
        <span class='kw'>match</span> <span class='kw-2'>*</span><span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(_) <span class='op'>=&gt;</span> <span class='bool-val'>true</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='bool-val'>false</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>is_none</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>bool</span> {
        <span class='op'>!</span><span class='self'>self</span>.<span class='ident'>is_some</span>()
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20is_some(%26self)%20-%3E%20bool%20%7B%0A%20%20%20%20%20%20%20%20match%20*self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(_)%20%3D%3E%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20false%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20is_none(%26self)%20-%3E%20bool%20%7B%0A%20%20%20%20%20%20%20%20!self.is_some()%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To borrow the underlying value (if any):</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>as_ref</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='kw-2'>*</span><span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='kw-2'>ref</span> <span class='ident'>x</span>) <span class='op'>-&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>x</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>as_mut</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='kw-2'>*</span><span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='kw-2'>ref</span> <span class='kw-2'>mut</span> <span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>x</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>,
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20as_ref(%26self)%20-%3E%20Option%3C%26T%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20*self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(ref%20x)%20-%3E%20Some(x)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20None%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20as_mut(%26mut%20self)%20-%3E%20Option%3C%26mut%20T%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20*self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(ref%20mut%20x)%20%3D%3E%20Some(x)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20None%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To consume the option and return its underlying value, <code>panic</code>king if it is <code>None</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>unwrap</span>(<span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>val</span>) <span class='op'>=&gt;</span> <span class='ident'>val</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;called `Option::unwrap()` on a `None` value&quot;</span>),
        }
    }
    
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>expect</span>(<span class='self'>self</span>, <span class='ident'>msg</span>: <span class='kw-2'>&amp;</span><span class='ident'>str</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='ident'>Som</span>(<span class='ident'>val</span>) <span class='op'>=&gt;</span> <span class='ident'>val</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>expect_failed</span>(<span class='ident'>msg</span>), <span class='comment'>// panic with the given message</span>
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20unwrap(self)%20-%3E%20T%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(val)%20%3D%3E%20val%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20panic!(%22called%20%60Option%3A%3Aunwrap()%60%20on%20a%20%60None%60%20value%22)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pub%20fn%20expect(self%2C%20msg%3A%20%26str)%20-%3E%20T%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Som(val)%20%3D%3E%20val%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20expect_failed(msg)%2C%20%2F%2F%20panic%20with%20the%20given%20message%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To consume the option and return its underlying value, returning a <code>def</code>ault value if it is <code>None</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>unwrap_or</span>(<span class='self'>self</span>, <span class='ident'>def</span>: <span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>x</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>def</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>unwrap_or_else</span><span class='op'>&lt;</span><span class='ident'>F</span>: <span class='ident'>FnOnce</span>() <span class='op'>-&gt;</span> <span class='ident'>T</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>x</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>f</span>(),
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20unwrap_or(self%2C%20def%3A%20T)%20-%3E%20T%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20def%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20unwrap_or_else%3CF%3A%20FnOnce()%20-%3E%20T%3E(self%2C%20f%3A%20F)%20-%3E%20T%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20f()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Additionally, for <code>T: Default</code>, we have:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>Default</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>unwrap_or_default</span>(<span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>x</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>Default</span>::<span class='ident'>default</span>(),
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3A%20Default%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20unwrap_or_default(self)%20-%3E%20T%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20Default%3A%3Adefault()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To apply a mapping function on the underlying value and returns the result, (<code>map</code> if any, <code>map_or</code> with a default value, <code>map_or_else</code> with a default generation function):</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>map</span><span class='op'>&lt;</span><span class='ident'>U</span>, <span class='ident'>F</span>: <span class='ident'>FnOnce</span>(<span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>f</span>(<span class='ident'>x</span>)),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>map_or</span><span class='op'>&lt;</span><span class='ident'>U</span>, <span class='ident'>F</span>: <span class='ident'>FnOnce</span>(<span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>def</span>: <span class='ident'>U</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>f</span>(<span class='ident'>x</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>def</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>map_or_else</span><span class='op'>&lt;</span><span class='ident'>U</span>, <span class='ident'>D</span>, <span class='ident'>F</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>def</span>: <span class='ident'>D</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span>
        <span class='kw'>where</span> <span class='ident'>D</span>: <span class='ident'>FnOnce</span>() <span class='op'>-&gt;</span> <span class='ident'>U</span>,
              <span class='ident'>F</span>: <span class='ident'>FnOnce</span>(<span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>U</span>,
    {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>f</span>(<span class='ident'>x</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>def</span>(),
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20map%3CU%2C%20F%3A%20FnOnce(T)%20-%3E%20U%3E(self%2C%20f%3A%20F)%20-%3E%20Option%3CU%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20Some(f(x))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20None%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20map_or%3CU%2C%20F%3A%20FnOnce(T)%20-%3E%20U%3E(self%2C%20def%3A%20U%2C%20f%3A%20F)%20-%3E%20U%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20f(x)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20def%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20map_or_else%3CU%2C%20D%2C%20F%3E(self%2C%20def%3A%20D%2C%20f%3A%20F)%20-%3E%20U%0A%20%20%20%20%20%20%20%20where%20D%3A%20FnOnce()%20-%3E%20U%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20F%3A%20FnOnce(T)%20-%3E%20U%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20f(x)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20def()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To transform an <code>Option</code> into a <code>Result</code>, with <code>Some</code> mapping to <code>Ok</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>ok_or</span><span class='op'>&lt;</span><span class='ident'>E</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>err</span>: <span class='ident'>E</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>T</span>, <span class='ident'>E</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>v</span>) <span class='op'>=&gt;</span> <span class='prelude-val'>Ok</span>(<span class='ident'>v</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Err</span>(<span class='ident'>err</span>),
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>ok_or_else</span><span class='op'>&lt;</span><span class='ident'>E</span>, <span class='ident'>F</span>: <span class='ident'>FnOnce</span>() <span class='op'>-&gt;</span> <span class='ident'>E</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>err</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span><span class='ident'>T</span>, <span class='ident'>E</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>v</span>) <span class='op'>=&gt;</span> <span class='prelude-val'>Ok</span>(<span class='ident'>v</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Err</span>(<span class='ident'>err</span>()),
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20ok_or%3CE%3E(self%2C%20err%3A%20E)%20-%3E%20Result%3CT%2C%20E%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(v)%20%3D%3E%20Ok(v)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20Err(err)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20ok_or_else%3CE%2C%20F%3A%20FnOnce()%20-%3E%20E%3E(self%2C%20err%3A%20F)%20-%3E%20Result%3CT%2C%20E%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(v)%20%3D%3E%20Ok(v)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20Err(err())%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To transform an <code>Option</code> into a iterator over the reference of its underlying value (if any):</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>iter</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>Iter</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='ident'>Iter</span> { <span class='ident'>inner</span>: <span class='ident'>Item</span> { <span class='ident'>opt</span>: <span class='self'>self</span>.<span class='ident'>as_ref</span>() } }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>iter_mut</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>IterMut</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='ident'>IterMut</span> { <span class='ident'>inner</span>: <span class='ident'>Item</span> { <span class='ident'>opt</span>: <span class='self'>self</span>.<span class='ident'>as_mut</span>() } }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20iter(%26self)%20-%3E%20Iter%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20Iter%20%7B%20inner%3A%20Item%20%7B%20opt%3A%20self.as_ref()%20%7D%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20iter_mut(%26mut%20self)%20-%3E%20IterMut%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20IterMut%20%7B%20inner%3A%20Item%20%7B%20opt%3A%20self.as_mut()%20%7D%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Note that <code>Option&lt;T&gt;</code> also implements <code>IntoIterator&lt;Item=T&gt;</code>, <code>&amp;Option&lt;T&gt;</code> implements <code>IntoIterator&lt;Item=&amp;T&gt;</code>, <code>&amp;mut Option&lt;T&gt;</code> implements <code>IntoIterator&lt;Item=&amp;mut T&gt;</code>.</p>

<hr>

<p>To chain one option with possibly another, such that if the current option is <code>Some</code> then return the next option <code>optd</code>, otherwise returning <code>None</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>and</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span>(<span class='self'>self</span>, <span class='ident'>optb</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(_) <span class='op'>=&gt;</span> <span class='ident'>optb</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>and_then</span><span class='op'>&lt;</span><span class='ident'>U</span>, <span class='ident'>F</span>: <span class='ident'>FnOnce</span>(<span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;&gt;</span>(<span class='self'>self</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>U</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>x</span>) <span class='op'>=&gt;</span> <span class='ident'>f</span>(<span class='ident'>x</span>),
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>,
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20and%3CU%3E(self%2C%20optb%3A%20Option%3CU%3E)%20-%3E%20Option%3CU%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(_)%20%3D%3E%20optb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20None%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20and_then%3CU%2C%20F%3A%20FnOnce(T)%20-%3E%20Option%3CU%3E%3E(self%2C%20f%3A%20F)%20-%3E%20Option%3CU%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(x)%20%3D%3E%20f(x)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20None%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>To chain options of the same type, such that current option gets returned if it is <code>Some</code>, otherwise return the next option <code>optd</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>or</span>(<span class='self'>self</span>, <span class='ident'>optb</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(_) <span class='op'>=&gt;</span> <span class='self'>self</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>optb</span>,
        }
    }

    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>or_else</span><span class='op'>&lt;</span><span class='ident'>F</span>: <span class='ident'>FnOnce</span>() <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;&gt;</span>(<span class='self'>self</span>, <span class='ident'>f</span>: <span class='ident'>F</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='kw'>match</span> <span class='self'>self</span> {
            <span class='prelude-val'>Some</span>(_) <span class='op'>=&gt;</span> <span class='self'>self</span>,
            <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='ident'>f</span>(),
        }
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20or(self%2C%20optb%3A%20Option%3CT%3E)%20-%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(_)%20%3D%3E%20self%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20optb%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pub%20fn%20or_else%3CF%3A%20FnOnce()%20-%3E%20Option%3CT%3E%3E(self%2C%20f%3A%20F)%20-%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20match%20self%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Some(_)%20%3D%3E%20self%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20None%20%3D%3E%20f()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>To take the underlying out (if any) and return it, leaving a <code>None</code> in place:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>take</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>replace</span>(<span class='self'>self</span>, <span class='prelude-val'>None</span>)
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3CT%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20take(%26mut%20self)%20-%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20std%3A%3Amem%3A%3Areplace(self%2C%20None)%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<hr>

<p>For <code>T: Clone</code> and an <code>Option&lt;&amp;&#39;a T&gt;</code>, we have:</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>impl</span><span class='op'>&lt;</span><span class='lifetime'>&#39;a</span>, <span class='ident'>T</span>: <span class='ident'>Clone</span><span class='op'>&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='lifetime'>&#39;a</span> <span class='ident'>T</span><span class='op'>&gt;</span> {
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>cloned</span>(<span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='self'>self</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>t</span><span class='op'>|</span> <span class='ident'>t</span>.<span class='ident'>clone</span>())
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aimpl%3C'a%2C%20T%3A%20Clone%3E%20Option%3C%26'a%20T%3E%20%7B%0A%20%20%20%20pub%20fn%20cloned(self)%20-%3E%20Option%3CT%3E%20%7B%0A%20%20%20%20%20%20%20%20self.map(%7Ct%7C%20t.clone())%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>

<p>Also note that <code>Option&lt;T&gt;</code> implements <code>From&lt;T&gt;</code>.</p>

<p>Also note that <code>Option&lt;T&gt;</code> implements <code>Copy</code>, <code>Debug</code>, <code>Ord</code>, <code>PartialOrd</code>, <code>PartialEq</code>, <code>Eq</code>, <code>Hash</code>, <code>Clone</code> if <code>T</code> has corresponding traits implemented.</p>

<p>Also note that <code>Option&lt;T&gt;</code> implements <code>FromIterator&lt;Option&lt;A&gt;&gt;</code> if <code>T: FromIterator&lt;A&gt;</code>.</p>

<p>Finally, note that <code>Option&lt;T&gt;</code> implements <code>Default</code>, with <code>default()</code> always returning a <code>None</code>.</p>

    <script src='rustbook.js'></script>
</div></div>


</body>
</html>